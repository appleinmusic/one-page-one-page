# Project: Predicting the Impact of S. pneumoniae Metabolites on Microglial Activation

## 1. Project Overview

This project uses a comprehensive, multi-stage bioinformatics pipeline to predict which metabolites produced by *Streptococcus pneumoniae* are most likely to cause the activation of host microglial cells. The analysis is performed entirely *in silico* using public data and a variety of computational tools.

The project is structured into a series of scripts that should be run sequentially. The key stages are:
1.  **Host Response Analysis**: Defining a molecular signature of microglial activation from public RNA-seq data.
2.  **Bacterial Potential Analysis**: Reconstructing the metabolic networks of several *S. pneumoniae* strains to predict their metabolite production capabilities.
3.  **Bridging Analysis**: Connecting the bacterial metabolites to the host response pathways through simulated target prediction.
4.  **Advanced Modeling**: Using machine learning and molecular docking simulations to add depth and mechanistic insight to the predictions.
5.  **Final Synthesis**: Integrating all lines of evidence to rank the top candidate metabolites.

## 2. Directory Structure

The project follows this structure:

```
.
├── data/
│   ├── genomes/              # Stores downloaded genome files (.fna)
│   ├── counts_matrix.tsv     # (Generated by run_deseq2.R) Dummy count data
│   └── metadata.csv          # (Generated by run_deseq2.R) Dummy metadata
├── results/
│   ├── annotations/          # (Generated by pipeline) Prokka annotation outputs
│   ├── docking/              # (Generated by pipeline) Molecular docking results
│   ├── figures/              # All generated figures (PNGs)
│   │   ├── host_response/
│   │   ├── bacterial_metabolism/
│   │   ├── bridging_analysis/
│   │   ├── advanced_modeling/
│   │   └── final_synthesis/
│   └── tables/               # All generated data tables (CSVs)
├── scripts/
│   ├── run_deseq2.R
│   ├── 02_host_response_visualization.py
│   ├── 03_bacterial_metabolism_pipeline.sh
│   ├── 04_bacterial_metabolism_comparison.py
│   ├── 05_bridging_analysis.py
│   ├── 06_ml_metabolite_prediction.py
│   ├── 07_molecular_docking.sh
│   └── 08_final_synthesis.py
└── README.md                 # This file
```

## 3. How to Run the Pipeline

To reproduce the analysis, run the scripts in the `scripts/` directory in the following order. It is assumed you have a `conda` environment set up with all the necessary dependencies mentioned in the scripts (e.g., DESeq2, Prokka, gapseq, pandas, scikit-learn, etc.).

### Step 1: Analyze Host Response Signature
First, run the R script to perform differential gene expression analysis. This script also creates dummy data for itself.
```bash
Rscript scripts/run_deseq2.R
```
Then, run the Python script to visualize the DGE results and perform pathway analysis.
```bash
python3 scripts/02_host_response_visualization.py
```
**Outputs**: Figures 1A, 1B, 1C and Tables S1, S2 in `results/`.

### Step 2: Analyze Bacterial Metabolic Potential
First, run the main shell script to orchestrate the (conceptual) download, annotation, and metabolic reconstruction.
```bash
bash scripts/03_bacterial_metabolism_pipeline.sh
```
Then, run the Python script to compare the generated metabolite lists.
```bash
python3 scripts/04_bacterial_metabolism_comparison.py
```
**Outputs**: Figures 2A, 2B and Table S3 in `results/`.

### Step 3: Bridge Host and Bacteria & Advanced Modeling
Run the remaining Python and shell scripts sequentially to perform the bridging analysis and advanced modeling.
```bash
# Bridging analysis
python3 scripts/05_bridging_analysis.py

# Machine learning prediction
python3 scripts/06_ml_metabolite_prediction.py

# Molecular docking (conceptual)
bash scripts/07_molecular_docking.sh
```
**Outputs**: Figures 3A, 3B, 4A, 4B, 5 and Tables S4, S5 in `results/`.

### Step 4: Final Synthesis
Finally, run the synthesis script to integrate all results and generate the final ranking.
```bash
python3 scripts/08_final_synthesis.py
```
**Outputs**: Figure 6 and Table S6 in `results/`.

---
This concludes the automated bioinformatics pipeline. All results, figures, and tables will be located in the `results` directory.
